import { createAddress, TestTransactionEvent } from 'forta-agent-tools/lib/tests';
import { findCreatedContracts, identifyTokenInterface, interfaceIdsMap } from './utils';
import { TokenInterface } from './types';

const mockContractClass = jest.fn();

jest.mock('ethers', () => ({
  ...jest.requireActual('ethers'),
  Contract: jest.fn().mockImplementation(() => mockContractClass()),
}));

describe('utils', () => {
  describe('identifyTokenInterface()', () => {
    const contractAddress = createAddress('0x1');
    const mockProvider = {
      getCode: jest.fn(),
    };
    const mockContract = {
      supportsInterface: jest.fn(),
      balanceOf: jest.fn(),
      totalSupply: jest.fn(),
      allowance: jest.fn(),
      symbol: jest.fn(),
      name: jest.fn(),
    };

    beforeAll(() => {
      mockContractClass.mockReturnValue(mockContract);
    });

    beforeEach(() => {
      mockProvider.getCode.mockClear();
      Object.values(mockContract).forEach((fn) => fn.mockClear());
    });

    afterAll(() => {
      mockContractClass.mockClear();
    });

    it('returns an interface if a contract implements ERC165', async () => {
      mockContract.supportsInterface.mockImplementation(
        (interfaceId: string) => interfaceId === interfaceIdsMap[TokenInterface.ERC20Detailed],
      );

      let tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(tokenInterface).toStrictEqual(TokenInterface.ERC20Detailed);

      mockContract.supportsInterface.mockClear();
      mockContract.supportsInterface.mockImplementation(
        (interfaceId: string) => interfaceId === interfaceIdsMap[TokenInterface.ERC721Metadata],
      );

      tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(tokenInterface).toStrictEqual(TokenInterface.ERC721Metadata);

      mockContract.supportsInterface.mockClear();
      mockContract.supportsInterface.mockImplementation(
        (interfaceId: string) => interfaceId === interfaceIdsMap[TokenInterface.ERC1155],
      );

      tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(tokenInterface).toStrictEqual(TokenInterface.ERC1155);
      expect(mockProvider.getCode).toBeCalledTimes(0);
    });

    it('returns an interface if a contract contains bytecode of the interface', async () => {
      mockContract.supportsInterface.mockResolvedValue(false);

      // https://etherscan.io/address/0xcfcecfe2bd2fed07a9145222e8a7ad9cf1ccd22a#code
      const erc20Code =
        '60806040523480156200001157600080fd5b5060405180604001604052806008815260200167416473686172657360c01b8152506040518060400160405280600381526020016241445360e81b815250600b82600390805190602001906200006992919062000301565b5081516200007f90600490602085019062000301565b506005805460ff191660ff9290921691909117905550620000b49050620000a562000110565b6001600160e01b036200011516565b6007805460ff19169055620000e4620000d56001600160e01b036200011016565b6001600160e01b036200016716565b6200010a620000fb6001600160e01b036200011016565b6001600160e01b03620001b916565b620003a3565b335b90565b620001308160066200020b60201b62002a9f1790919060201c565b6040516001600160a01b038216907f6719d08c1888103bea251a4ed56406bd0c3e69723c8a1686e017e7bbe159b6f890600090a250565b620001828160086200020b60201b62002a9f1790919060201c565b6040516001600160a01b038216907f994a936646fe87ffe4f1e469d3d6aa417d6b855598397f323de5b449f765f0c390600090a250565b620001d48160096200020b60201b62002a9f1790919060201c565b6040516001600160a01b038216907f6ae172837ea30b801fbfcdd4108aa1d5bf8ff775444fd70256b44e6bf3dfc3f690600090a250565b6200022082826001600160e01b036200029816565b1562000273576040805162461bcd60e51b815260206004820152601f60248201527f526f6c65733a206163636f756e7420616c72656164792068617320726f6c6500604482015290519081900360640190fd5b6001600160a01b0316600090815260209190915260409020805460ff19166001179055565b60006001600160a01b038216620002e15760405162461bcd60e51b8152600401808060200182810382526022815260200180620032be6022913960400191505060405180910390fd5b506001600160a01b03166000908152602091909152604090205460ff1690565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200034457805160ff191683800117855562000374565b8280016001018555821562000374579182015b828111156200037457825182559160200191906001019062000357565b506200038292915062000386565b5090565b6200011291905b808211156200038257600081556001016200038d565b612f0b80620003b36000396000f3fe608060405234801561001057600080fd5b50600436106102415760003560e01c80636ef8d66d116101455780639d590d07116100bd578063a9059cbb1161008c578063be76ebe511610071578063be76ebe5146107ee578063dd62ed3e14610827578063dfe11cf11461086257610241565b8063a9059cbb14610782578063aa271e1a146107bb57610241565b80639d590d07146106db5780639f727c2714610708578063a2ded11514610710578063a457c2d71461074957610241565b80638456cb591161011457806395d89b41116100f957806395d89b4114610698578063983b2d56146106a057806398650275146106d357610241565b80638456cb591461065d5780638a6db9c31461066557610241565b80636ef8d66d146105bc5780637065cb48146105c457806370a08231146105f757806382dc1ec41461062a57610241565b80633092afd5116101d857806346fbf68e116101a75780635c975abb1161018c5780635c975abb14610548578063643edef9146105505780636b2c0f551461058957610241565b806346fbf68e146104b457806355385c07146104e757610241565b80633092afd514610422578063313ce5671461045557806339509351146104735780633f4ba83a146104ac57610241565b806323b872dd1161021457806323b872dd1461035f57806328c23a45146103a25780632f4c1f90146103aa5780632f54bf6e146103ef57610241565b806306fdde0314610246578063095ea7b3146102c357806317ffc3201461031057806318160ddd14610345575b600080fd5b61024e6108b3565b6040805160208082528351818301528351919283929083019185019080838360005b83811015610288578181015183820152602001610270565b50505050905090810190601f1680156102b55780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6102fc600480360360408110156102d957600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610967565b604080519115158252519081900360200190f35b6103436004803603602081101561032657600080fd5b503573ffffffffffffffffffffffffffffffffffffffff166109ed565b005b61034d610b23565b60408051918252519081900360200190f35b6102fc6004803603606081101561037557600080fd5b5073ffffffffffffffffffffffffffffffffffffffff813581169160208101359091169060400135610b29565b610343610bb1565b610343600480360360608110156103c057600080fd5b50803590602081013567ffffffffffffffff1690604001356fffffffffffffffffffffffffffffffff16610bc3565b6102fc6004803603602081101561040557600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610c45565b6103436004803603602081101561043857600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610c5e565b61045d610cd5565b6040805160ff9092168252519081900360200190f35b6102fc6004803603604081101561048957600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610cde565b610343610d5d565b6102fc600480360360208110156104ca57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610eae565b610343600480360360808110156104fd57600080fd5b50803573ffffffffffffffffffffffffffffffffffffffff1690602081013590604081013567ffffffffffffffff1690606001356fffffffffffffffffffffffffffffffff16610ec8565b6102fc610fc3565b6102fc6004803603604081101561056657600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610fcc565b6103436004803603602081101561059f57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16611041565b6103436110aa565b610343600480360360208110156105da57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff166110ba565b61034d6004803603602081101561060d57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16611123565b6103436004803603602081101561064057600080fd5b503573ffffffffffffffffffffffffffffffffffffffff1661114b565b6103436111b4565b61034d6004803603602081101561067b57600080fd5b503573ffffffffffffffffffffffffffffffffffffffff166112da565b61024e611302565b610343600480360360208110156106b657600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16611381565b6103436113ef565b610343600480360360408110156106f157600080fd5b508035906020013567ffffffffffffffff166113ff565b61034361147d565b6102fc6004803603604081101561072657600080fd5b5073ffffffffffffffffffffffffffffffffffffffff813516906020013561152a565b6102fc6004803603604081101561075f57600080fd5b5073ffffffffffffffffffffffffffffffffffffffff81351690602001356115e5565b6102fc6004803603604081101561079857600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135611664565b6102fc600480360360208110156107d157600080fd5b503573ffffffffffffffffffffffffffffffffffffffff166116e3565b6102fc6004803603604081101561080457600080fd5b5073ffffffffffffffffffffffffffffffffffffffff81351690602001356116ee565b61034d6004803603604081101561083d57600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135811691602001351661178c565b6102fc6004803603608081101561087857600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060208101359067ffffffffffffffff604082013581169160600135166117c4565b60038054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff61010060018816150201909516949094049384018190048102820181019092528281526060939092909183018282801561095d5780601f106109325761010080835404028352916020019161095d565b820191906000526020600020905b81548152906001019060200180831161094057829003601f168201915b5050505050905090565b60075460009060ff16156109dc57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b6109e68383611980565b9392505050565b6109fd6109f8611994565b610c45565b610a52576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b604080517f70a08231000000000000000000000000000000000000000000000000000000008152306004820152905160009173ffffffffffffffffffffffffffffffffffffffff8416916370a0823191602480820192602092909190829003018186803b158015610ac257600080fd5b505afa158015610ad6573d6000803e3d6000fd5b505050506040513d6020811015610aec57600080fd5b50519050610b1f610afb611994565b73ffffffffffffffffffffffffffffffffffffffff8416908363ffffffff61199816565b5050565b60025490565b60075460009060ff1615610b9e57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b610ba9848484611a25565b949350505050565b610bc1610bbc611994565b611a98565b565b60075460ff1615610c3557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b610c40838383611aed565b505050565b6000610c5860088363ffffffff611b8016565b92915050565b610c696109f8611994565b610cbe576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b610cc9816000611c1b565b610cd281611cda565b50565b60055460ff1690565b60075460009060ff1615610d5357604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b6109e68383611d2f565b610d6d610d68611994565b610eae565b610dc2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526030815260200180612c586030913960400191505060405180910390fd5b60075460ff16610e3357604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601460248201527f5061757361626c653a206e6f7420706175736564000000000000000000000000604482015290519081900360640190fd5b600780547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa610e84611994565b6040805173ffffffffffffffffffffffffffffffffffffffff9092168252519081900360200190a1565b6000610eb982611d90565b80610c585750610c5882610c45565b60075460ff1615610f3a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b610f4382611da3565b604080518481526fffffffffffffffffffffffffffffffff83166020820152815167ffffffffffffffff85169273ffffffffffffffffffffffffffffffffffffffff8816927fba50aca5f20ac3dbd86e8ed7d3ce4a1412e8927a87b28583989b7e0372470c76929081900390910190a3610fbd8484611ea6565b50505050565b60075460ff1690565b6000610fd96109f8611994565b61102e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b6110388383611c1b565b50600192915050565b61104c6109f8611994565b6110a1576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b610cd281611f07565b610bc16110b5611994565b611f07565b6110c56109f8611994565b61111a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b610cd281611f5c565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205490565b611156610d68611994565b6111ab576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526030815260200180612c586030913960400191505060405180910390fd5b610cd281611fb1565b6111bf610d68611994565b611214576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526030815260200180612c586030913960400191505060405180910390fd5b60075460ff161561128657604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b600780547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a258610e84611994565b73ffffffffffffffffffffffffffffffffffffffff166000908152600a602052604090205490565b60048054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff61010060018816150201909516949094049384018190048102820181019092528281526060939092909183018282801561095d5780601f106109325761010080835404028352916020019161095d565b61139161138c611994565b6116e3565b6113e6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526030815260200180612d316030913960400191505060405180910390fd5b610cd281612006565b610bc16113fa611994565b611cda565b60075460ff161561147157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b610b1f82826000611aed565b6114886109f8611994565b6114dd576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b6114e5611994565b73ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f19350505050158015610cd2573d6000803e3d6000fd5b60006115376109f8611994565b61158c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b611038836115e084604051806060016040528060308152602001612caa6030913973ffffffffffffffffffffffffffffffffffffffff88166000908152600a6020526040902054919063ffffffff61205b16565b611c1b565b60075460009060ff161561165a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b6109e6838361210c565b60075460009060ff16156116d957604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b6109e68383612187565b6000610eb98261219b565b60006116fb6109f8611994565b611750576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e815260200180612d61602e913960400191505060405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff83166000908152600a60205260409020546110389084906115e0908563ffffffff6121ae16565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260016020908152604080832093909416825291909152205490565b60006117d161138c611994565b611826576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526030815260200180612d316030913960400191505060405180910390fd5b60075460ff161561189857604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601060248201527f5061757361626c653a2070617573656400000000000000000000000000000000604482015290519081900360640190fd5b6118a183611da3565b6040805167ffffffffffffffff84811682526020820187905282519086169273ffffffffffffffffffffffffffffffffffffffff8916927fc827015d9c397e6928e53a714990475428a406192b1dcdec7f03dab0397dd9c7929081900390910190a361190d8585612222565b611975611918611994565b6115e086604051806060016040528060318152602001612d0060319139600a6000611941611994565b73ffffffffffffffffffffffffffffffffffffffff168152602081019190915260400160002054919063ffffffff61205b16565b506001949350505050565b600061103861198d611994565b8484612353565b3390565b6040805173ffffffffffffffffffffffffffffffffffffffff8416602482015260448082018490528251808303909101815260649091019091526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fa9059cbb00000000000000000000000000000000000000000000000000000000179052610c4090849061249a565b6000611a328484846126d8565b611a8e84611a3e611994565b611a8985604051806060016040528060288152602001612db06028913973ffffffffffffffffffffffffffffffffffffffff8a16600090815260016020526040812090611941611994565b612353565b5060019392505050565b611aa960088263ffffffff6128a916565b60405173ffffffffffffffffffffffffffffffffffffffff8216907f58619076adf5bb0943d100ef88d52d7c3fd691b19d3a9071b555b651fbf418da90600090a250565b611af682611da3565b8167ffffffffffffffff16611b09611994565b604080518681526fffffffffffffffffffffffffffffffff85166020820152815173ffffffffffffffffffffffffffffffffffffffff93909316927fba50aca5f20ac3dbd86e8ed7d3ce4a1412e8927a87b28583989b7e0372470c76929181900390910190a3610c40611b7a611994565b84612955565b600073ffffffffffffffffffffffffffffffffffffffff8216611bee576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526022815260200180612dd86022913960400191505060405180910390fd5b5073ffffffffffffffffffffffffffffffffffffffff166000908152602091909152604090205460ff1690565b611c24826116e3565b611c79576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526032815260200180612c266032913960400191505060405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff82166000818152600a6020908152604091829020849055815184815291517ffb033db91d06a612766244cffe6d52a4643bbdba04ee19b9dca3c43b2e03fe029281900390910190a25050565b611ceb60098263ffffffff6128a916565b60405173ffffffffffffffffffffffffffffffffffffffff8216907fe94479a9f7e1952cc78f2d6baab678adc1b772d936c6583def489e524cb6669290600090a250565b6000611038611d3c611994565b84611a898560016000611d4d611994565b73ffffffffffffffffffffffffffffffffffffffff908116825260208083019390935260409182016000908120918c16815292529020549063ffffffff6121ae16565b6000610c5860068363ffffffff611b8016565b6000611d0f60075b60028160ff1610611e305767ffffffffffffffff8416600882810260ff9081169290921c84821c831618600481901c600f16189450908416600585901b611fe016600c86901b620ff000169490921b62ffff0016939093181891909118907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01611dab565b5061ffff81811690841614610c4057604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f577261707065644144533a20696e76616c696420414453206164647265737300604482015290519081900360640190fd5b611eb08282612955565b610b1f82611ebc611994565b611a8984604051806060016040528060248152602001612dfa6024913973ffffffffffffffffffffffffffffffffffffffff8816600090815260016020526040812090611941611994565b611f1860068263ffffffff6128a916565b60405173ffffffffffffffffffffffffffffffffffffffff8216907fcd265ebaf09df2871cc7bd4133404a235ba12eff2041bb89d9c714a2621c7c7e90600090a250565b611f6d60088263ffffffff612a9f16565b60405173ffffffffffffffffffffffffffffffffffffffff8216907f994a936646fe87ffe4f1e469d3d6aa417d6b855598397f323de5b449f765f0c390600090a250565b611fc260068263ffffffff612a9f16565b60405173ffffffffffffffffffffffffffffffffffffffff8216907f6719d08c1888103bea251a4ed56406bd0c3e69723c8a1686e017e7bbe159b6f890600090a250565b61201760098263ffffffff612a9f16565b60405173ffffffffffffffffffffffffffffffffffffffff8216907f6ae172837ea30b801fbfcdd4108aa1d5bf8ff775444fd70256b44e6bf3dfc3f690600090a250565b60008184841115612104576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825283818151815260200191508051906020019080838360005b838110156120c95781810151838201526020016120b1565b50505050905090810190601f1680156120f65780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b505050900390565b6000611038612119611994565b84611a8985604051806060016040528060258152602001612eb26025913960016000612143611994565b73ffffffffffffffffffffffffffffffffffffffff908116825260208083019390935260409182016000908120918d1681529252902054919063ffffffff61205b16565b6000611038612194611994565b84846126d8565b6000610c5860098363ffffffff611b8016565b6000828201838110156109e657604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b73ffffffffffffffffffffffffffffffffffffffff82166122a457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604482015290519081900360640190fd5b6002546122b7908263ffffffff6121ae16565b60025573ffffffffffffffffffffffffffffffffffffffff82166000908152602081905260409020546122f0908263ffffffff6121ae16565b73ffffffffffffffffffffffffffffffffffffffff83166000818152602081815260408083209490945583518581529351929391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35050565b73ffffffffffffffffffffffffffffffffffffffff83166123bf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526024815260200180612e646024913960400191505060405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff821661242b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526022815260200180612c886022913960400191505060405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff808416600081815260016020908152604080832094871680845294825291829020859055815185815291517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259281900390910190a3505050565b6124b98273ffffffffffffffffffffffffffffffffffffffff16612b65565b61252457604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f5361666545524332303a2063616c6c20746f206e6f6e2d636f6e747261637400604482015290519081900360640190fd5b600060608373ffffffffffffffffffffffffffffffffffffffff16836040518082805190602001908083835b6020831061258d57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101612550565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d80600081146125ef576040519150601f19603f3d011682016040523d82523d6000602084013e6125f4565b606091505b50915091508161266557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564604482015290519081900360640190fd5b805115610fbd5780806020019051602081101561268157600080fd5b5051610fbd576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602a815260200180612e88602a913960400191505060405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff8316612744576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526025815260200180612e3f6025913960400191505060405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff82166127b0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526023815260200180612be16023913960400191505060405180910390fd5b61280081604051806060016040528060268152602001612cda6026913973ffffffffffffffffffffffffffffffffffffffff8616600090815260208190526040902054919063ffffffff61205b16565b73ffffffffffffffffffffffffffffffffffffffff8085166000908152602081905260408082209390935590841681522054612842908263ffffffff6121ae16565b73ffffffffffffffffffffffffffffffffffffffff8084166000818152602081815260409182902094909455805185815290519193928716927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a3505050565b6128b38282611b80565b612908576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526021815260200180612d8f6021913960400191505060405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff1660009081526020919091526040902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169055565b73ffffffffffffffffffffffffffffffffffffffff82166129c1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526021815260200180612e1e6021913960400191505060405180910390fd5b612a1181604051806060016040528060228152602001612c046022913973ffffffffffffffffffffffffffffffffffffffff8516600090815260208190526040902054919063ffffffff61205b16565b73ffffffffffffffffffffffffffffffffffffffff8316600090815260208190526040902055600254612a4a908263ffffffff612b9e16565b60025560408051828152905160009173ffffffffffffffffffffffffffffffffffffffff8516917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9181900360200190a35050565b612aa98282611b80565b15612b1557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f526f6c65733a206163636f756e7420616c72656164792068617320726f6c6500604482015290519081900360640190fd5b73ffffffffffffffffffffffffffffffffffffffff1660009081526020919091526040902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055565b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470818114801590610ba9575050151592915050565b60006109e683836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f77000081525061205b56fe45524332303a207472616e7366657220746f20746865207a65726f206164647265737345524332303a206275726e20616d6f756e7420657863656564732062616c616e6365577261707065644144533a206d696e74657220617070726f766520666f72206e6f6e2d6d696e74696e672061646472657373506175736572526f6c653a2063616c6c657220646f6573206e6f742068617665207468652050617573657220726f6c6545524332303a20617070726f766520746f20746865207a65726f2061646472657373577261707065644144533a20646563726561736564206d696e746572416c6c6f77616e63652062656c6f77207a65726f45524332303a207472616e7366657220616d6f756e7420657863656564732062616c616e6365577261707065644144533a206d696e74656420616d6f756e742065786365656473206d696e746572416c6c6f77616e63654d696e746572526f6c653a2063616c6c657220646f6573206e6f74206861766520746865204d696e74657220726f6c654f776e6572526f6c653a2063616c6c657220646f6573206e6f74206861766520746865204f776e657220726f6c65526f6c65733a206163636f756e7420646f6573206e6f74206861766520726f6c6545524332303a207472616e7366657220616d6f756e74206578636565647320616c6c6f77616e6365526f6c65733a206163636f756e7420697320746865207a65726f206164647265737345524332303a206275726e20616d6f756e74206578636565647320616c6c6f77616e636545524332303a206275726e2066726f6d20746865207a65726f206164647265737345524332303a207472616e736665722066726f6d20746865207a65726f206164647265737345524332303a20617070726f76652066726f6d20746865207a65726f20616464726573735361666545524332303a204552433230206f7065726174696f6e20646964206e6f74207375636365656445524332303a2064656372656173656420616c6c6f77616e63652062656c6f77207a65726fa265627a7a723158201d7220336f2965df40f860e5aa7e9b07b4c7f038659d6524e7d374f08dfcd0fd64736f6c63430005110032526f6c65733a206163636f756e7420697320746865207a65726f2061646472657373';
      mockProvider.getCode.mockResolvedValueOnce(erc20Code);

      let tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(mockProvider.getCode).toBeCalledTimes(1);
      expect(tokenInterface).toStrictEqual(TokenInterface.ERC20Detailed);

      // https://etherscan.io/address/0xcaace84b015330c0ab4bd003f6fa0b84ec6c64ac#code
      const erc721Code =
        '6000600a8190556001600b556002600c556003600d556004600e5560a06040819052608082905262000035916010919062000369565b506301e133806013553480156200004b57600080fd5b5060405162002d5d38038062002d5d8339810160408190526200006e916200042c565b6040518060400160405280600a815260200169466c6f7765722046616d60b01b81525060405180604001604052806002815260200161232360f11b8152508160029080519060200190620000c492919062000369565b508051620000da90600390602084019062000369565b5050600160005550620000ed3362000132565b600f80546001600160a01b038084166001600160a01b03199283161790925560118054928516929091169190911790556200012a33600162000184565b5050620004a0565b600880546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b6000546001600160a01b038316620001ae57604051622e076360e81b815260040160405180910390fd5b81600003620001d05760405163b562e8dd60e01b815260040160405180910390fd5b620001df6000848385620002be565b6001600160a01b038316600081815260056020908152604080832080546001600160801b031981166001600160401b038083168a018116918217680100000000000000006001600160401b031990941690921783900481168a01811690920217909155858452600490925290912080546001600160e01b031916909217600160a01b4290921691909102179055808083015b6040516001830192906001600160a01b038716906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a4808210620002715750600055505050565b6000828152601260209081526040918290208251606081018452905464ffffffffff808216808452650100000000008304909116938301939093526a0100000000000000000000900461ffff1692019190915215620003635760405162461bcd60e51b815260206004820152601e60248201527f43616e6e6f74207472616e73666572207374616b656420666c6f776572730000604482015260640160405180910390fd5b50505050565b828054620003779062000464565b90600052602060002090601f0160209004810192826200039b5760008555620003e6565b82601f10620003b657805160ff1916838001178555620003e6565b82800160010185558215620003e6579182015b82811115620003e6578251825591602001919060010190620003c9565b50620003f4929150620003f8565b5090565b5b80821115620003f45760008155600101620003f9565b80516001600160a01b03811681146200042757600080fd5b919050565b600080604083850312156200044057600080fd5b6200044b836200040f565b91506200045b602084016200040f565b90509250929050565b600181811c908216806200047957607f821691505b6020821081036200049a57634e487b7160e01b600052602260045260246000fd5b50919050565b6128ad80620004b06000396000f3fe608060405234801561001057600080fd5b50600436106102e95760003560e01c806382183fb011610191578063b88d4fde116100e3578063cf76a15311610097578063e985e9c511610071578063e985e9c5146106cf578063f2fde38b146106e2578063f4e8a0ae146106f557600080fd5b8063cf76a153146106ad578063e0622b27146106b5578063e6798baa146106c857600080fd5b8063c2a672e0116100c8578063c2a672e01461067e578063c2c55faa14610691578063c87b56dd1461069a57600080fd5b8063b88d4fde14610648578063b91816111461065b57600080fd5b8063a22cb46511610145578063adc9772e1161011f578063adc9772e146105b5578063aef5b1fe146105c8578063b69559d31461063557600080fd5b8063a22cb46514610590578063aa0de0b4146105a3578063ac972d6b146105ac57600080fd5b80638da5cb5b116101765780638da5cb5b1461056457806394edf9d41461057557806395d89b411461058857600080fd5b806382183fb014610531578063851073671461055157600080fd5b8063410d77a91161024a57806370a08231116101fe57806372c6d671116101d857806372c6d6711461050c578063791b3616146105155780637f8e12291461052857600080fd5b806370a08231146104de578063711bf9b2146104f1578063715018a61461050457600080fd5b806355f804b31161022f57806355f804b3146104595780636159f7f41461046c5780636352211e146104cb57600080fd5b8063410d77a91461043e57806342842e0e1461044657600080fd5b806318160ddd116102a157806323b872dd1161028657806323b872dd146103a557806324f9df38146103b857806340c10f191461042b57600080fd5b806318160ddd1461038257806323471d181461039257600080fd5b8063081812fc116102d2578063081812fc1461032b578063095ea7b31461035657806317fedeed1461036b57600080fd5b806301ffc9a7146102ee57806306fdde0314610316575b600080fd5b6103016102fc36600461228b565b61075f565b60405190151581526020015b60405180910390f35b61031e6107fc565b60405161030d9190612300565b61033e610339366004612313565b61088e565b6040516001600160a01b03909116815260200161030d565b610369610364366004612341565b6108eb565b005b610374600a5481565b60405190815260200161030d565b6001546000540360001901610374565b6103696103a036600461236d565b6109ef565b6103696103b336600461238a565b610a70565b6104156103c6366004612313565b6000908152601260209081526040918290208251606081018452905464ffffffffff80821680845265010000000000830490911693830193909352600160501b900461ffff1692019190915290565b60405164ffffffffff909116815260200161030d565b610369610439366004612341565b610a80565b610374610b02565b61036961045436600461238a565b610b18565b610369610467366004612457565b610b33565b61030161047a366004612313565b6000908152601260209081526040918290208251606081018452905464ffffffffff80821680845265010000000000830490911693830193909352600160501b900461ffff16920191909152151590565b61033e6104d9366004612313565b610ba0565b6103746104ec36600461236d565b610c1d565b6103696104ff3660046124a0565b610c85565b610369610d0a565b61037460135481565b60115461033e906001600160a01b031681565b610374600e5481565b61054461053f36600461236d565b610d70565b60405161030d91906124de565b600f5461033e906001600160a01b031681565b6008546001600160a01b031661033e565b61033e610583366004612313565b610ed7565b61031e610ee9565b61036961059e3660046124a0565b610ef8565b610374600b5481565b610374600c5481565b6103696105c3366004612341565b610fa6565b6106226105d6366004612313565b6000908152601260209081526040918290208251606081018452905464ffffffffff80821683526501000000000082041692820192909252600160501b90910461ffff16910181905290565b60405161ffff909116815260200161030d565b610369610643366004612313565b6111cb565b61036961065636600461253d565b61122a565b61030161066936600461236d565b60096020526000908152604090205460ff1681565b61036961068c366004612341565b611274565b610374600d5481565b61031e6106a8366004612313565b611445565b61031e611479565b6103696106c3366004612341565b611507565b6001610374565b6103016106dd3660046125bd565b611740565b6103696106f036600461236d565b61184a565b610737610703366004612313565b60126020526000908152604090205464ffffffffff8082169165010000000000810490911690600160501b900461ffff1683565b6040805164ffffffffff948516815293909216602084015261ffff169082015260600161030d565b60006001600160e01b031982167f80ac58cd0000000000000000000000000000000000000000000000000000000014806107c257506001600160e01b031982167f5b5e139f00000000000000000000000000000000000000000000000000000000145b806107f657507f01ffc9a7000000000000000000000000000000000000000000000000000000006001600160e01b03198316145b92915050565b60606002805461080b906125eb565b80601f0160208091040260200160405190810160405280929190818152602001828054610837906125eb565b80156108845780601f1061085957610100808354040283529160200191610884565b820191906000526020600020905b81548152906001019060200180831161086757829003601f168201915b5050505050905090565b60006108998261192c565b6108cf576040517fcf4700e400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b506000908152600660205260409020546001600160a01b031690565b60006108f682610ed7565b9050806001600160a01b0316836001600160a01b031603610943576040517f943f7b8c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b336001600160a01b038216146109935761095d8133611740565b610993576040517fcfb3b94200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008281526006602052604080822080546001600160a01b0319166001600160a01b0387811691821790925591518593918516917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a4505050565b6008546001600160a01b03163314610a4e5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b600f80546001600160a01b0319166001600160a01b0392909216919091179055565b610a7b838383611965565b505050565b3360009081526009602052604090205460ff1680610aa857506008546001600160a01b031633145b610af45760405162461bcd60e51b815260206004820152601860248201527f53656e646572206973206e6f7420617574686f72697a656400000000000000006044820152606401610a45565b610afe8282611bbc565b5050565b60006001600054610b139190612635565b905090565b610a7b8383836040518060200160405280600081525061122a565b6008546001600160a01b03163314610b8d5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610a45565b8051610afe9060109060208401906121dc565b60008181526012602090815260408083208151606081018352905464ffffffffff80821680845265010000000000830490911694830194909452600160501b900461ffff1691810191909152908203610c0457610bfc83611d3e565b519392505050565b5050600f546001600160a01b0316919050565b50919050565b60006001600160a01b038216610c5f576040517f8f4eb60400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b506001600160a01b031660009081526005602052604090205467ffffffffffffffff1690565b6008546001600160a01b03163314610cdf5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610a45565b6001600160a01b03919091166000908152600960205260409020805460ff1916911515919091179055565b6008546001600160a01b03163314610d645760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610a45565b610d6e6000611e7b565b565b6060600080610d7e84610c1d565b905060008167ffffffffffffffff811115610d9b57610d9b6123cb565b604051908082528060200260200182016040528015610de657816020015b6040805160608101825260008082526020808301829052928201528252600019909201910181610db95790505b50905060015b6001546000540360001901610e0290600161264c565b811015610ece576000610e1482611d3e565b5190506001600160a01b0380881690821603610ebb576000838681518110610e3e57610e3e612664565b6020908102919091018101518481526000858152601280845260408083208151606081018352905464ffffffffff80821680845265010000000000830490911683890152600160501b90910461ffff1691830182905215159185019190915291879052835291810191909152905085610eb68161267a565b965050505b5080610ec68161267a565b915050610dec565b50949350505050565b6000610ee282611d3e565b5192915050565b60606003805461080b906125eb565b336001600160a01b03831603610f3a576040517fb06307db00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3360008181526007602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b3360009081526009602052604090205460ff1680610fce57506008546001600160a01b031633145b61101a5760405162461bcd60e51b815260206004820152601860248201527f53656e646572206973206e6f7420617574686f72697a656400000000000000006044820152606401610a45565b6110238161192c565b61106f5760405162461bcd60e51b815260206004820152601e60248201527f7374616b6528293a20466c6f77657220646f65736e27742065786973742100006044820152606401610a45565b816001600160a01b031661108282610ba0565b6001600160a01b0316146110d85760405162461bcd60e51b815260206004820152601960248201527f7374616b6528293a205374616b6572206e6f74206f776e6572000000000000006044820152606401610a45565b600f546001600160a01b039081169083160361115b5760405162461bcd60e51b8152602060048201526024808201527f7374616b6528293a205374616b6520616464726573732063616e206e6f74207360448201527f74616b65000000000000000000000000000000000000000000000000000000006064820152608401610a45565b6000818152601260205260409020805464ffffffffff19164264ffffffffff161781556111888383611ecd565b600f5460405183916001600160a01b0390811691908616907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90600090a4505050565b6008546001600160a01b031633146112255760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610a45565b601355565b611235848484611965565b6001600160a01b0383163b1561126e5761125184848484611f22565b61126e576040516368d2bf6b60e11b815260040160405180910390fd5b50505050565b3360009081526009602052604090205460ff168061129c57506008546001600160a01b031633145b6112e85760405162461bcd60e51b815260206004820152601860248201527f53656e646572206973206e6f7420617574686f72697a656400000000000000006044820152606401610a45565b6000818152601260209081526040918290208251606081018452905464ffffffffff80821680845265010000000000830490911693830193909352600160501b900461ffff169201919091526113805760405162461bcd60e51b815260206004820152601e60248201527f756e5374616b653a20466c6f776572206973206e6f74207374616b65642100006044820152606401610a45565b816001600160a01b031661139382611d3e565b516001600160a01b0316146113ea5760405162461bcd60e51b815260206004820181905260248201527f756e7374616b653a20556e7374616b6572206e6f74207265616c206f776e65726044820152606401610a45565b600081815260126020526040808220805464ffffffffff19168155600f549151909284926001600160a01b03808816939116917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91a4505050565b606060106114528361200e565b6040516020016114639291906126af565b6040516020818303038152906040529050919050565b60108054611486906125eb565b80601f01602080910402602001604051908101604052809291908181526020018280546114b2906125eb565b80156114ff5780601f106114d4576101008083540402835291602001916114ff565b820191906000526020600020905b8154815290600101906020018083116114e257829003601f168201915b505050505081565b3360009081526009602052604090205460ff168061152f57506008546001600160a01b031633145b61157b5760405162461bcd60e51b815260206004820152601860248201527f53656e646572206973206e6f7420617574686f72697a656400000000000000006044820152606401610a45565b816001600160a01b031661158e82611d3e565b516001600160a01b03161461160b5760405162461bcd60e51b815260206004820152602560248201527f7570677261646528293a2053656e646572206e6f74206f776e6572206f66206660448201527f6c6f7765720000000000000000000000000000000000000000000000000000006064820152608401610a45565b6000818152601260205260409020805461163290600390600160501b900461ffff16612797565b61ffff166000036116f357601354815461165c9065010000000000900464ffffffffff1642612635565b10156116d05760405162461bcd60e51b815260206004820152602960248201527f43616e6e6f742075706772616465206d6f7265207468616e20332074696d657360448201527f20706572207965617200000000000000000000000000000000000000000000006064820152608401610a45565b805469ffffffffff00000000001916650100000000004264ffffffffff16021781555b805464ffffffffff19164264ffffffffff1617808255600160501b900461ffff1681600a611720836127b8565b91906101000a81548161ffff021916908361ffff16021790555050505050565b6011546000906001600160a01b031615611819576011546040517fc45527910000000000000000000000000000000000000000000000000000000081526001600160a01b03858116600483015291821691841690829063c455279190602401602060405180830381865afa1580156117bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117e091906127d9565b6001600160a01b0316036117f85760019150506107f6565b6011546001600160a01b038085169116036118175760019150506107f6565b505b6001600160a01b0380841660009081526007602090815260408083209386168352929052205460ff165b9392505050565b6008546001600160a01b031633146118a45760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610a45565b6001600160a01b0381166119205760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f64647265737300000000000000000000000000000000000000000000000000006064820152608401610a45565b61192981611e7b565b50565b600081600111158015611940575060005482105b80156107f6575050600090815260046020526040902054600160e01b900460ff161590565b600061197082611d3e565b9050836001600160a01b031681600001516001600160a01b0316146119c1576040517fa114810000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000336001600160a01b03861614806119df57506119df8533611740565b806119fa5750336119ef8461088e565b6001600160a01b0316145b905080611a33576040517f59c896be00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b038416611a73576040517fea553b3400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b611a808585856001612143565b600083815260066020908152604080832080546001600160a01b03191690556001600160a01b03888116845260058352818420805467ffffffffffffffff1980821667ffffffffffffffff92831660001901831617909255898316808752848720805493841693831660019081018416949094179055898752600490955283862080546001600160e01b031916909517600160a01b4290921691909102178455870180855291909320805492939192909116611b71576000548214611b71578054602086015167ffffffffffffffff16600160a01b026001600160e01b03199091166001600160a01b038a16171781555b50505082846001600160a01b0316866001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a45050505050565b6000546001600160a01b038316611bff576040517f2e07630000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b81600003611c39576040517fb562e8dd00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b611c466000848385612143565b6001600160a01b038316600081815260056020908152604080832080547fffffffffffffffffffffffffffffffff00000000000000000000000000000000811667ffffffffffffffff8083168a0181169182176801000000000000000067ffffffffffffffff1990941690921783900481168a01811690920217909155858452600490925290912080546001600160e01b031916909217600160a01b4290921691909102179055808083015b6040516001830192906001600160a01b038716906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a4808210611cf25750600055505050565b60408051606081018252600080825260208201819052918101919091528180600111611e4957600054811015611e4957600081815260046020908152604091829020825160608101845290546001600160a01b0381168252600160a01b810467ffffffffffffffff1692820192909252600160e01b90910460ff16151591810182905290611e475780516001600160a01b031615611ddd579392505050565b5060001901600081815260046020908152604091829020825160608101845290546001600160a01b038116808352600160a01b820467ffffffffffffffff1693830193909352600160e01b900460ff1615159281019290925215611e42579392505050565b611ddd565b505b6040517fdf2d9b4200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600880546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b60008181526006602052604080822080546001600160a01b0319169055518291906001600160a01b038516907f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925908390a45050565b604051630a85bd0160e11b81526000906001600160a01b0385169063150b7a0290611f579033908990889088906004016127f6565b6020604051808303816000875af1925050508015611f92575060408051601f3d908101601f19168201909252611f8f91810190612832565b60015b611ff0573d808015611fc0576040519150601f19603f3d011682016040523d82523d6000602084013e611fc5565b606091505b508051600003611fe8576040516368d2bf6b60e11b815260040160405180910390fd5b805181602001fd5b6001600160e01b031916630a85bd0160e11b1490505b949350505050565b60608160000361205157505060408051808201909152600181527f3000000000000000000000000000000000000000000000000000000000000000602082015290565b8160005b811561207b57806120658161267a565b91506120749050600a8361284f565b9150612055565b60008167ffffffffffffffff811115612096576120966123cb565b6040519080825280601f01601f1916602001820160405280156120c0576020820181803683370190505b5090505b8415612006576120d5600183612635565b91506120e2600a86612863565b6120ed90603061264c565b60f81b81838151811061210257612102612664565b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535061213c600a8661284f565b94506120c4565b6000828152601260209081526040918290208251606081018452905464ffffffffff80821680845265010000000000830490911693830193909352600160501b900461ffff169201919091521561126e5760405162461bcd60e51b815260206004820152601e60248201527f43616e6e6f74207472616e73666572207374616b656420666c6f7765727300006044820152606401610a45565b8280546121e8906125eb565b90600052602060002090601f01602090048101928261220a5760008555612250565b82601f1061222357805160ff1916838001178555612250565b82800160010185558215612250579182015b82811115612250578251825591602001919060010190612235565b5061225c929150612260565b5090565b5b8082111561225c5760008155600101612261565b6001600160e01b03198116811461192957600080fd5b60006020828403121561229d57600080fd5b813561184381612275565b60005b838110156122c35781810151838201526020016122ab565b8381111561126e5750506000910152565b600081518084526122ec8160208601602086016122a8565b601f01601f19169290920160200192915050565b60208152600061184360208301846122d4565b60006020828403121561232557600080fd5b5035919050565b6001600160a01b038116811461192957600080fd5b6000806040838503121561235457600080fd5b823561235f8161232c565b946020939093013593505050565b60006020828403121561237f57600080fd5b81356118438161232c565b60008060006060848603121561239f57600080fd5b83356123aa8161232c565b925060208401356123ba8161232c565b929592945050506040919091013590565b634e487b7160e01b600052604160045260246000fd5b600067ffffffffffffffff808411156123fc576123fc6123cb565b604051601f8501601f19908116603f01168101908282118183101715612424576124246123cb565b8160405280935085815286868601111561243d57600080fd5b858560208301376000602087830101525050509392505050565b60006020828403121561246957600080fd5b813567ffffffffffffffff81111561248057600080fd5b8201601f8101841361249157600080fd5b612006848235602084016123e1565b600080604083850312156124b357600080fd5b82356124be8161232c565b9150602083013580151581146124d357600080fd5b809150509250929050565b602080825282518282018190526000919060409081850190868401855b82811015612530578151805185528681015161ffff1687860152850151151585850152606090930192908501906001016124fb565b5091979650505050505050565b6000806000806080858703121561255357600080fd5b843561255e8161232c565b9350602085013561256e8161232c565b925060408501359150606085013567ffffffffffffffff81111561259157600080fd5b8501601f810187136125a257600080fd5b6125b1878235602084016123e1565b91505092959194509250565b600080604083850312156125d057600080fd5b82356125db8161232c565b915060208301356124d38161232c565b600181811c908216806125ff57607f821691505b602082108103610c1757634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000828210156126475761264761261f565b500390565b6000821982111561265f5761265f61261f565b500190565b634e487b7160e01b600052603260045260246000fd5b60006001820161268c5761268c61261f565b5060010190565b600081516126a58185602086016122a8565b9290920192915050565b600080845481600182811c9150808316806126cb57607f831692505b602080841082036126ea57634e487b7160e01b86526022600452602486fd5b8180156126fe576001811461270f5761273c565b60ff1986168952848901965061273c565b60008b81526020902060005b868110156127345781548b82015290850190830161271b565b505084890196505b50505050505061277861274f8286612693565b7f2e6a736f6e000000000000000000000000000000000000000000000000000000815260050190565b95945050505050565b634e487b7160e01b600052601260045260246000fd5b600061ffff808416806127ac576127ac612781565b92169190910692915050565b600061ffff8083168181036127cf576127cf61261f565b6001019392505050565b6000602082840312156127eb57600080fd5b81516118438161232c565b60006001600160a01b0380871683528086166020840152508360408301526080606083015261282860808301846122d4565b9695505050505050565b60006020828403121561284457600080fd5b815161184381612275565b60008261285e5761285e612781565b500490565b60008261287257612872612781565b50069056fea2646970667358221220b7ed814a5e179e3c526c62e6d444beeec1aacb69de4f634311f9ab0751d7a55264736f6c634300080d0033000000000000000000000000a5409ec958c83c3f309868babaca7c86dcb077c10000000000000000000000004f025c68c27f860946dc9fa2814bef2a6a7e2ce0';

      mockProvider.getCode.mockReset();
      mockProvider.getCode.mockResolvedValueOnce(erc721Code);

      tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(mockProvider.getCode).toBeCalledTimes(1);
      expect(tokenInterface).toStrictEqual(TokenInterface.ERC721Metadata);

      // https://etherscan.io/address/0x495f947276749ce646f68ac8c248420045cb7b5e#code
      const erc1155Code =
        '0x608060405234801561001057600080fd5b50600436106101d95760003560e01c80638f32d59b11610104578063bd85b039116100a2578063e985e9c511610071578063e985e9c5146110a9578063f242432a14611125578063f2fde38b14611234578063f923e8c314611278576101d9565b8063bd85b03914610fb7578063c311c52314610ff9578063cd7c03261461101b578063d26ea6c014611065576101d9565b80639e037eea116100de5780639e037eea14610cdc578063a22cb46514610d20578063a50aa5c314610d70578063b48ab8b614610db4576101d9565b80638f32d59b14610be957806391686f5314610c0b57806395d89b4114610c59576101d9565b80634e1273f41161017c578063731133e91161014b578063731133e91461098f57806373505d3514610a7e578063862440e214610ada5780638da5cb5b14610b9f576101d9565b80634e1273f4146107305780634f558e79146108d1578063510b515814610917578063715018a614610985576101d9565b80630e89341c116101b85780630e89341c1461032857806324d88785146103cf5780632eb2c2d61461048a5780634060b25e146106ad576101d9565b8062fdd58e146101de57806301ffc9a71461024057806306fdde03146102a5575b600080fd5b61022a600480360360408110156101f457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506112fb565b6040518082815260200191505060405180910390f35b61028b6004803603602081101561025657600080fd5b8101908080357bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190505050611343565b604051808215151515815260200191505060405180910390f35b6102ad6113f4565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156102ed5780820151818401526020810190506102d2565b50505050905090810190601f16801561031a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6103546004803603602081101561033e57600080fd5b8101908080359060200190929190505050611492565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610394578082015181840152602081019050610379565b50505050905090810190601f1680156103c15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b610488600480360360208110156103e557600080fd5b810190808035906020019064010000000081111561040257600080fd5b82018360208201111561041457600080fd5b8035906020019184600183028401116401000000008311171561043657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506115f9565b005b6106ab600480360360a08110156104a057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001906401000000008111156104fd57600080fd5b82018360208201111561050f57600080fd5b8035906020019184602083028401116401000000008311171561053157600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561059157600080fd5b8201836020820111156105a357600080fd5b803590602001918460208302840111640100000000831117156105c557600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561062557600080fd5b82018360208201111561063757600080fd5b8035906020019184600183028401116401000000008311171561065957600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050611678565b005b6106b56117b4565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156106f55780820151818401526020810190506106da565b50505050905090810190601f1680156107225780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b61087a6004803603604081101561074657600080fd5b810190808035906020019064010000000081111561076357600080fd5b82018360208201111561077557600080fd5b8035906020019184602083028401116401000000008311171561079757600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f820116905080830192505050505050509192919290803590602001906401000000008111156107f757600080fd5b82018360208201111561080957600080fd5b8035906020019184602083028401116401000000008311171561082b57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f8201169050808301925050505050505091929192905050506117f1565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b838110156108bd5780820151818401526020810190506108a2565b505050509050019250505060405180910390f35b6108fd600480360360208110156108e757600080fd5b8101908080359060200190929190505050611937565b604051808215151515815260200191505060405180910390f35b6109436004803603602081101561092d57600080fd5b8101908080359060200190929190505050611956565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61098d611989565b005b610a7c600480360360808110156109a557600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919080359060200190929190803590602001906401000000008111156109f657600080fd5b820183602082011115610a0857600080fd5b80359060200191846001830284011164010000000083111715610a2a57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050611aaf565b005b610ac060048036036020811015610a9457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611b8b565b604051808215151515815260200191505060405180910390f35b610b9d60048036036040811015610af057600080fd5b810190808035906020019092919080359060200190640100000000811115610b1757600080fd5b820183602082011115610b2957600080fd5b80359060200191846001830284011164010000000083111715610b4b57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050611bab565b005b610ba7611c21565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b610bf1611c4b565b604051808215151515815260200191505060405180910390f35b610c5760048036036040811015610c2157600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611caa565b005b610c61611e32565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610ca1578082015181840152602081019050610c86565b50505050905090810190601f168015610cce5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b610d1e60048036036020811015610cf257600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611ed0565b005b610d6e60048036036040811015610d3657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803515159060200190929190505050611f87565b005b610db260048036036020811015610d8657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050612088565b005b610fb560048036036080811015610dca57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190640100000000811115610e0757600080fd5b820183602082011115610e1957600080fd5b80359060200191846020830284011164010000000083111715610e3b57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f82011690508083019250505050505050919291929080359060200190640100000000811115610e9b57600080fd5b820183602082011115610ead57600080fd5b80359060200191846020830284011164010000000083111715610ecf57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f82011690508083019250505050505050919291929080359060200190640100000000811115610f2f57600080fd5b820183602082011115610f4157600080fd5b80359060200191846001830284011164010000000083111715610f6357600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050612148565b005b610fe360048036036020811015610fcd57600080fd5b8101908080359060200190929190505050612267565b6040518082815260200191505060405180910390f35b611001612284565b604051808215151515815260200191505060405180910390f35b61102361228d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6110a76004803603602081101561107b57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506122b3565b005b61110b600480360360408110156110bf57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061235c565b604051808215151515815260200191505060405180910390f35b611232600480360360a081101561113b57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919080359060200190929190803590602001906401000000008111156111ac57600080fd5b8201836020820111156111be57600080fd5b803590602001918460018302840111640100000000831117156111e057600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050612389565b005b6112766004803603602081101561124a57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506123ef565b005b611280612460565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156112c05780820151818401526020810190506112a5565b50505050905090810190601f1680156112ed5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b60008061130884846124fe565b90506113148385612558565b61131e578061133a565b61133961132a846126c4565b826126f090919063ffffffff16565b5b91505092915050565b60006301ffc9a760e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806113dc575063d9b67a2660e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b156113ea57600190506113ef565b600090505b919050565b60048054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561148a5780601f1061145f5761010080835404028352916020019161148a565b820191906000526020600020905b81548152906001019060200180831161146d57829003601f168201915b505050505081565b606080600860008481526020019081526020016000208054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561153c5780601f106115115761010080835404028352916020019161153c565b820191906000526020600020905b81548152906001019060200180831161151f57829003601f168201915b50505050509050600081511461155557809150506115f4565b60078054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156115eb5780601f106115c0576101008083540402835291602001916115eb565b820191906000526020600020905b8154815290600101906020018083116115ce57829003601f168201915b50505050509150505b919050565b611609611604612778565b612780565b61165e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e8152602001806140f5602e913960400191505060405180910390fd5b8060079080519060200190611674929190613efe565b5050565b8473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806116b857506116b7853361235c565b5b61170d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602f8152602001806141e4602f913960400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415611793576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260308152602001806141886030913960400191505060405180910390fd5b61179f858585856127d7565b6117ad858585855a86612b3c565b5050505050565b60606040518060400160405280600581526020017f322e302e30000000000000000000000000000000000000000000000000000000815250905090565b6060815183511461184d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602c8152602001806141b8602c913960400191505060405180910390fd5b6060835160405190808252806020026020018201604052801561187f5781602001602082028038833980820191505090505b50905060008090505b845181101561192c576000808683815181106118a057fe5b602002602001015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008583815181106118f057fe5b602002602001015181526020019081526020016000205482828151811061191357fe5b6020026020010181815250508080600101915050611888565b508091505092915050565b6000806006600084815260200190815260200160002054119050919050565b600b6020528060005260406000206000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b611999611994612778565b612780565b6119ee576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e8152602001806140f5602e913960400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a36000600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b600960009054906101000a900460ff16611b31576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f5265656e7472616e637947756172643a207265656e7472616e742063616c6c0081525060200191505060405180910390fd5b6000600960006101000a81548160ff021916908315150217905550611b5e611b57612778565b8484612dfa565b611b6a84848484612ebf565b6001600960006101000a81548160ff02191690831515021790555050505050565b600a6020528060005260406000206000915054906101000a900460ff1681565b81611bbd81611bb8612778565b612558565b611c12576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603581526020018061428c6035913960400191505060405180910390fd5b611c1c8383612ee6565b505050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16611c8e612778565b73ffffffffffffffffffffffffffffffffffffffff1614905090565b81611cbc81611cb7612778565b612558565b611d11576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603581526020018061428c6035913960400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415611d97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526030815260200180613ff56030913960400191505060405180910390fd5b81600b600085815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff16837f39071c63e44267bfdefc7b625c0df99d3ce2e6ff98d9f5e9e8a7ab43cdf5000d60405160405180910390a3505050565b60058054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611ec85780601f10611e9d57610100808354040283529160200191611ec8565b820191906000526020600020905b815481529060010190602001808311611eab57829003601f168201915b505050505081565b611ee0611edb612778565b612780565b611f35576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e8152602001806140f5602e913960400191505060405180910390fd5b600a60008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81549060ff021916905550565b80600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3183604051808215151515815260200191505060405180910390a35050565b612098612093612778565b612780565b6120ed576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e8152602001806140f5602e913960400191505060405180910390fd5b6001600a60008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600960009054906101000a900460ff166121ca576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f5265656e7472616e637947756172643a207265656e7472616e742063616c6c0081525060200191505060405180910390fd5b6000600960006101000a81548160ff02191690831515021790555060008090505b83518110156122395761222c6121ff612778565b85838151811061220b57fe5b602002602001015185848151811061221f57fe5b6020026020010151612dfa565b80806001019150506121eb565b5061224684848484612faf565b6001600960006101000a81548160ff02191690831515021790555050505050565b600060066000838152602001908152602001600020549050919050565b60006001905090565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6122c36122be612778565b612780565b612318576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e8152602001806140f5602e913960400191505060405180910390fd5b80600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60006123688383613006565b156123765760019050612383565b6123808383613076565b90505b92915050565b600061239586856124fe565b9050828110156123d9576123bd85856123b7848761310a90919063ffffffff16565b85611aaf565b60008111156123d4576123d38686868486613193565b5b6123e7565b6123e68686868686613193565b5b505050505050565b6123ff6123fa612778565b612780565b612454576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602e8152602001806140f5602e913960400191505060405180910390fd5b61245d816132cf565b50565b60078054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156124f65780601f106124cb576101008083540402835291602001916124f6565b820191906000526020600020905b8154815290600101906020018083116124d957829003601f168201915b505050505081565b60008060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002054905092915050565b60008073ffffffffffffffffffffffffffffffffffffffff16600b600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461266d578173ffffffffffffffffffffffffffffffffffffffff16600b600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614806126665750612665600b600085815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1683613006565b5b90506126be565b600061267884613415565b90508273ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614806126ba57506126b98184613006565b5b9150505b92915050565b60006126e96126d283612267565b6126db84613429565b61310a90919063ffffffff16565b9050919050565b60008082840190508381101561276e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f536166654d617468236164643a204f564552464c4f570000000000000000000081525060200191505060405180910390fd5b8091505092915050565b600033905090565b60008173ffffffffffffffffffffffffffffffffffffffff166127a1611c21565b73ffffffffffffffffffffffffffffffffffffffff1614806127d057506127cf6127c9611c21565b83613006565b5b9050919050565b8051825114612831576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260358152602001806141236035913960400191505060405180910390fd5b60008251905060008090505b81811015612a2e576128cd83828151811061285457fe5b60200260200101516000808973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008785815181106128a857fe5b602002602001015181526020019081526020016000205461310a90919063ffffffff16565b6000808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600086848151811061291957fe5b60200260200101518152602001908152602001600020819055506129bb83828151811061294257fe5b60200260200101516000808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600087858151811061299657fe5b60200260200101518152602001908152602001600020546126f090919063ffffffff16565b6000808773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000868481518110612a0757fe5b6020026020010151815260200190815260200160002081905550808060010191505061283d565b508373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8686604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b83811015612ade578082015181840152602081019050612ac3565b50505050905001838103825284818151815260200191508051906020019060200280838360005b83811015612b20578082015181840152602081019050612b05565b5050505090500194505050505060405180910390a45050505050565b612b5b8573ffffffffffffffffffffffffffffffffffffffff16613440565b15612df25760008573ffffffffffffffffffffffffffffffffffffffff1663bc197c8184338a8989886040518763ffffffff1660e01b8152600401808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001806020018060200180602001848103845287818151815260200191508051906020019060200280838360005b83811015612c42578082015181840152602081019050612c27565b50505050905001848103835286818151815260200191508051906020019060200280838360005b83811015612c84578082015181840152602081019050612c69565b50505050905001848103825285818151815260200191508051906020019080838360005b83811015612cc3578082015181840152602081019050612ca8565b50505050905090810190601f168015612cf05780820380516001836020036101000a031916815260200191505b5098505050505050505050602060405180830381600088803b158015612d1557600080fd5b5087f1158015612d29573d6000803e3d6000fd5b50505050506040513d6020811015612d4057600080fd5b8101908080519060200190929190505050905063bc197c8160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614612df0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603f815260200180614213603f913960400191505060405180910390fd5b505b505050505050565b612e048284612558565b612e59576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603a815260200180614086603a913960400191505060405180910390fd5b80612e63836126c4565b1015612eba576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260358152602001806140c06035913960400191505060405180910390fd5b505050565b612ecb84848484613485565b600181511115612ee057612edf8382612ee6565b5b50505050565b80600860008481526020019081526020016000209080519060200190612f0d929190613efe565b50817f6bb7ff708619ba0610cba295a58592e0451dee2622938c8755667688daf3529b826040518080602001828103825283818151815260200191508051906020019080838360005b83811015612f71578082015181840152602081019050612f56565b50505050905090810190601f168015612f9e5780820380516001836020036101000a031916815260200191505b509250505060405180910390a25050565b612fbb8484848461361d565b6001815111156130005760008090505b8351811015612ffe57612ff1848281518110612fe357fe5b602002602001015183612ee6565b8080600101915050612fcb565b505b50505050565b6000600a60008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16156130635760019050613070565b61306d8383613993565b90505b92915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b600082821115613182576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f536166654d617468237375623a20554e444552464c4f5700000000000000000081525060200191505060405180910390fd5b600082840390508091505092915050565b8473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806131d357506131d2853361235c565b5b613228576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602a815260200180614025602a913960400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614156132ae576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602b815260200180613fa4602b913960400191505060405180910390fd5b6132ba858585856139d4565b6132c8858585855a86613bc8565b5050505050565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415613355576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526026815260200180613fcf6026913960400191505060405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a380600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b6000602860380160ff1682901c9050919050565b60006001602860ff166001901b0382169050919050565b600080823f90506000801b811415801561347d57507fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a47060001b8114155b915050919050565b6134e7826000808773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000868152602001908152602001600020546126f090919063ffffffff16565b6000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000858152602001908152602001600020819055506135608260066000868152602001908152602001600020546126f090919063ffffffff16565b6006600085815260200190815260200160002081905550600061358284613e04565b90508473ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628787604051808381526020018281526020019250505060405180910390a4613616818686865a87613bc8565b5050505050565b8151835114613677576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260308152602001806141586030913960400191505060405180910390fd5b600083519050600061369c8560008151811061368f57fe5b6020026020010151613e04565b905060008090505b828110156138765760008682815181106136ba57fe5b602002602001015190508273ffffffffffffffffffffffffffffffffffffffff166136e482613e04565b73ffffffffffffffffffffffffffffffffffffffff1614613750576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603781526020018061404f6037913960400191505060405180910390fd5b6137c586838151811061375f57fe5b60200260200101516000808b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000848152602001908152602001600020546126f090919063ffffffff16565b6000808a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008381526020019081526020016000208190555061385186838151811061382757fe5b602002602001015160066000848152602001908152602001600020546126f090919063ffffffff16565b60066000838152602001908152602001600020819055505080806001019150506136a4565b508573ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8888604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b8381101561392657808201518184015260208101905061390b565b50505050905001838103825284818151815260200191508051906020019060200280838360005b8381101561396857808201518184015260208101905061394d565b5050505090500194505050505060405180910390a461398b818787875a88612b3c565b505050505050565b60008173ffffffffffffffffffffffffffffffffffffffff166139b584613e16565b73ffffffffffffffffffffffffffffffffffffffff1614905092915050565b613a36816000808773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008581526020019081526020016000205461310a90919063ffffffff16565b6000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600084815260200190815260200160002081905550613aeb816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000858152602001908152602001600020546126f090919063ffffffff16565b6000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000848152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628585604051808381526020018281526020019250505060405180910390a450505050565b613be78573ffffffffffffffffffffffffffffffffffffffff16613440565b15613dfc5760008573ffffffffffffffffffffffffffffffffffffffff1663f23a6e6184338a8989886040518763ffffffff1660e01b8152600401808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200184815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015613ccf578082015181840152602081019050613cb4565b50505050905090810190601f168015613cfc5780820380516001836020036101000a031916815260200191505b509650505050505050602060405180830381600088803b158015613d1f57600080fd5b5087f1158015613d33573d6000803e3d6000fd5b50505050506040513d6020811015613d4a57600080fd5b8101908080519060200190929190505050905063f23a6e6160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614613dfa576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603a815260200180614252603a913960400191505060405180910390fd5b505b505050505050565b6000613e0f82613415565b9050919050565b600080600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff1663c4552791846040518263ffffffff1660e01b8152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060206040518083038186803b158015613ebb57600080fd5b505afa158015613ecf573d6000803e3d6000fd5b505050506040513d6020811015613ee557600080fd5b8101908080519060200190929190505050915050919050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10613f3f57805160ff1916838001178555613f6d565b82800160010185558215613f6d579182015b82811115613f6c578251825591602001919060010190613f51565b5b509050613f7a9190613f7e565b5090565b613fa091905b80821115613f9c576000816000905550600101613f84565b5090565b9056fe4552433131353523736166655472616e7366657246726f6d3a20494e56414c49445f524543495049454e544f776e61626c653a206e6577206f776e657220697320746865207a65726f20616464726573734173736574436f6e74726163745368617265642373657443726561746f723a20494e56414c49445f414444524553532e4552433131353523736166655472616e7366657246726f6d3a20494e56414c49445f4f50455241544f52455243313135355472616461626c652362617463684d696e743a204d554c5449504c455f4f524947494e535f4e4f545f414c4c4f5745444173736574436f6e7472616374536861726564235f726571756972654d696e7461626c653a204f4e4c595f43524541544f525f414c4c4f5745444173736574436f6e7472616374536861726564235f726571756972654d696e7461626c653a20535550504c595f4558434545444544455243313135355472616461626c65236f6e6c794f776e65723a2043414c4c45525f49535f4e4f545f4f574e455245524331313535235f7361666542617463685472616e7366657246726f6d3a20494e56414c49445f4152524159535f4c454e475448455243313135355472616461626c652362617463684d696e743a20494e56414c49445f4152524159535f4c454e47544845524331313535237361666542617463685472616e7366657246726f6d3a20494e56414c49445f524543495049454e54455243313135352362616c616e63654f6642617463683a20494e56414c49445f41525241595f4c454e47544845524331313535237361666542617463685472616e7366657246726f6d3a20494e56414c49445f4f50455241544f5245524331313535235f63616c6c6f6e45524331313535426174636852656365697665643a20494e56414c49445f4f4e5f524543454956455f4d45535341474545524331313535235f63616c6c6f6e4552433131353552656365697665643a20494e56414c49445f4f4e5f524543454956455f4d4553534147454173736574436f6e74726163745368617265642363726561746f724f6e6c793a204f4e4c595f43524541544f525f414c4c4f574544a265627a7a7231582028f3e529f4dff9e1217e9c5fa3987610b4f138495f1f8d6516748e8ab795168d64736f6c63430005110032z';

      mockProvider.getCode.mockReset();
      mockProvider.getCode.mockResolvedValueOnce(erc1155Code);

      tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(mockProvider.getCode).toBeCalledTimes(1);
      expect(tokenInterface).toStrictEqual(TokenInterface.ERC1155);
    });

    it('returns an interface if a proxified contract implements ERC20', async () => {
      mockProvider.getCode.mockResolvedValue('0xPROXYCODE');

      mockContract.supportsInterface.mockRejectedValue('Revert');

      mockContract.balanceOf.mockResolvedValue(1);
      mockContract.allowance.mockResolvedValue(100);
      mockContract.totalSupply.mockResolvedValue(200);
      mockContract.symbol.mockResolvedValue('SYMBOL');
      mockContract.name.mockRejectedValue('Revert');

      let tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(tokenInterface).toStrictEqual(TokenInterface.ERC20Detailed);
      expect(mockContract.balanceOf).toBeCalledTimes(1);
      expect(mockContract.allowance).toBeCalledTimes(1);
      expect(mockContract.totalSupply).toBeCalledTimes(1);
      expect(mockContract.symbol).toBeCalledTimes(1);

      mockContract.symbol.mockClear().mockRejectedValue('Revert');
      mockContract.name.mockClear().mockResolvedValue('NAME');

      tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(tokenInterface).toStrictEqual(TokenInterface.ERC20Detailed);
      expect(mockContract.name).toBeCalledTimes(1);
    });

    it('returns null if contract implements unknown interface', async () => {
      mockProvider.getCode.mockResolvedValue('0xUNKNOWNCODE');
      mockContract.supportsInterface.mockResolvedValue(false);
      mockContract.balanceOf.mockRejectedValue('Revert');
      mockContract.allowance.mockRejectedValue('Revert');

      const tokenInterface = await identifyTokenInterface(contractAddress, mockProvider as any);

      expect(tokenInterface).toStrictEqual(null);
    });
  });

  describe('findCreatedContracts()', () => {
    let txEvent: TestTransactionEvent;

    beforeEach(() => {
      txEvent = new TestTransactionEvent();
    });

    it('returns empty array if there are no created contracts', () => {
      const createdContracts = findCreatedContracts(txEvent);
      expect(createdContracts).toStrictEqual([]);
    });

    it('returns created contracts', async () => {
      // https://etherscan.io/tx/0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab/advanced
      // You can get trace data here: https://composer.alchemyapi.io/
      const traces = [
        {
          action: {
            from: '0xddb108893104de4e1c6d0e47c42237db4e617acc',
            callType: 'call',
            gas: '0x6a7be8',
            input: '0x64b07f210000000000000000000000000000000000000000000000000000000000000001',
            to: '0xbaa65281c2fa2baacb2cb550ba051525a480d3f4',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            gasUsed: '0x259f6c',
            output: '0x',
          },
          subtraces: 3,
          traceAddress: [],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'call',
        },
        {
          action: {
            from: '0xbaa65281c2fa2baacb2cb550ba051525a480d3f4',
            callType: 'call',
            gas: '0x68c78b',
            input: '0xccceb2e60000000000000000000000000000000000000000000000000000000000000001',
            to: '0xb5b06a16621616875a6c2637948bf98ea57c58fa',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            gasUsed: '0x19dfac',
            output: '0x0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f',
          },
          subtraces: 3,
          traceAddress: [0],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'call',
        },
        {
          action: {
            from: '0xb5b06a16621616875a6c2637948bf98ea57c58fa',
            gas: '0x66a198',
            init: '0x608060405234801561001057600080fd5b506040516120d33803806120d38339818101604052602081101561003357600080fd5b810190808051906020019092919050505060016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550604051808061208160529139605201905060405180910390206040518060400160405280600e81526020017f44616920537461626c65636f696e000000000000000000000000000000000000815250805190602001206040518060400160405280600181526020017f3100000000000000000000000000000000000000000000000000000000000000815250805190602001208330604051602001808681526020018581526020018481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001955050505050506040516020818303038152906040528051906020012060058190555050611ee0806101a16000396000f3fe608060405234801561001057600080fd5b50600436106101425760003560e01c80637ecebe00116100b8578063a9059cbb1161007c578063a9059cbb146106b4578063b753a98c1461071a578063bb35783b14610768578063bf353dbb146107d6578063dd62ed3e1461082e578063f2d5d56b146108a657610142565b80637ecebe00146104a15780638fcbaf0c146104f957806395d89b411461059f5780639c52a7f1146106225780639dc29fac1461066657610142565b8063313ce5671161010a578063313ce567146102f25780633644e5151461031657806340c10f191461033457806354fd4d501461038257806365fae35e1461040557806370a082311461044957610142565b806306fdde0314610147578063095ea7b3146101ca57806318160ddd1461023057806323b872dd1461024e57806330adf81f146102d4575b600080fd5b61014f6108f4565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561018f578082015181840152602081019050610174565b50505050905090810190601f1680156101bc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b610216600480360360408110156101e057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061092d565b604051808215151515815260200191505060405180910390f35b610238610a1f565b6040518082815260200191505060405180910390f35b6102ba6004803603606081101561026457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610a25565b604051808215151515815260200191505060405180910390f35b6102dc610f3a565b6040518082815260200191505060405180910390f35b6102fa610f61565b604051808260ff1660ff16815260200191505060405180910390f35b61031e610f66565b6040518082815260200191505060405180910390f35b6103806004803603604081101561034a57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610f6c565b005b61038a611128565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103ca5780820151818401526020810190506103af565b50505050905090810190601f1680156103f75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6104476004803603602081101561041b57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611161565b005b61048b6004803603602081101561045f57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061128f565b6040518082815260200191505060405180910390f35b6104e3600480360360208110156104b757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506112a7565b6040518082815260200191505060405180910390f35b61059d600480360361010081101561051057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919080359060200190929190803515159060200190929190803560ff16906020019092919080359060200190929190803590602001909291905050506112bf565b005b6105a76117fa565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156105e75780820151818401526020810190506105cc565b50505050905090810190601f1680156106145780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6106646004803603602081101561063857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611833565b005b6106b26004803603604081101561067c57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611961565b005b610700600480360360408110156106ca57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611df4565b604051808215151515815260200191505060405180910390f35b6107666004803603604081101561073057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611e09565b005b6107d46004803603606081101561077e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611e19565b005b610818600480360360208110156107ec57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611e2a565b6040518082815260200191505060405180910390f35b6108906004803603604081101561084457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611e42565b6040518082815260200191505060405180910390f35b6108f2600480360360408110156108bc57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611e67565b005b6040518060400160405280600e81526020017f44616920537461626c65636f696e00000000000000000000000000000000000081525081565b600081600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b60015481565b600081600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015610adc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f4461692f696e73756666696369656e742d62616c616e6365000000000000000081525060200191505060405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614158015610bb457507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414155b15610db25781600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015610cab576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f4461692f696e73756666696369656e742d616c6c6f77616e636500000000000081525060200191505060405180910390fd5b610d31600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205483611e77565b600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b610dfb600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205483611e77565b600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610e87600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205483611e91565b600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190509392505050565b7fea2aa0a1be11a07ed86d755c93467f4f82362b452371d1ba94d1715123511acb60001b81565b601281565b60055481565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414611020576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f6e6f742d617574686f72697a6564000000000000000000000000000081525060200191505060405180910390fd5b611069600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611e91565b600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506110b860015482611e91565b6001819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b6040518060400160405280600181526020017f310000000000000000000000000000000000000000000000000000000000000081525081565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414611215576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f6e6f742d617574686f72697a6564000000000000000000000000000081525060200191505060405180910390fd5b60016000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b60026020528060005260406000206000915090505481565b60046020528060005260406000206000915090505481565b60006005547fea2aa0a1be11a07ed86d755c93467f4f82362b452371d1ba94d1715123511acb60001b8a8a8a8a8a604051602001808781526020018673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018381526020018215151515815260200196505050505050506040516020818303038152906040528051906020012060405160200180807f190100000000000000000000000000000000000000000000000000000000000081525060020183815260200182815260200192505050604051602081830303815290604052805190602001209050600073ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff16141561148c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f4461692f696e76616c69642d616464726573732d30000000000000000000000081525060200191505060405180910390fd5b60018185858560405160008152602001604052604051808581526020018460ff1660ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa1580156114e9573d6000803e3d6000fd5b5050506020604051035173ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff1614611593576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f696e76616c69642d7065726d6974000000000000000000000000000081525060200191505060405180910390fd5b60008614806115a25750854211155b611614576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f7065726d69742d65787069726564000000000000000000000000000081525060200191505060405180910390fd5b600460008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008154809291906001019190505587146116d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260118152602001807f4461692f696e76616c69642d6e6f6e636500000000000000000000000000000081525060200191505060405180910390fd5b6000856116e4576000611706565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff5b905080600360008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508873ffffffffffffffffffffffffffffffffffffffff168a73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040518082815260200191505060405180910390a350505050505050505050565b6040518060400160405280600381526020017f444149000000000000000000000000000000000000000000000000000000000081525081565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146118e7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f6e6f742d617574686f72697a6564000000000000000000000000000081525060200191505060405180910390fd5b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b80600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015611a16576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f4461692f696e73756666696369656e742d62616c616e6365000000000000000081525060200191505060405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614158015611aee57507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414155b15611cec5780600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015611be5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f4461692f696e73756666696369656e742d616c6c6f77616e636500000000000081525060200191505060405180910390fd5b611c6b600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611e77565b600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b611d35600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611e77565b600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611d8460015482611e77565b600181905550600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b6000611e01338484610a25565b905092915050565b611e14338383610a25565b505050565b611e24838383610a25565b50505050565b60006020528060005260406000206000915090505481565b6003602052816000526040600020602052806000526040600020600091509150505481565b611e72823383610a25565b505050565b6000828284039150811115611e8b57600080fd5b92915050565b6000828284019150811015611ea557600080fd5b9291505056fea265627a7a72315820c0ae2c29860c0a59d5586a579abbcddfe4bcef0524a87301425cbc58c3e94e3164736f6c634300050c0032454950373132446f6d61696e28737472696e67206e616d652c737472696e672076657273696f6e2c75696e7432353620636861696e49642c6164647265737320766572696679696e67436f6e7472616374290000000000000000000000000000000000000000000000000000000000000001',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            address: '0x6b175474e89094c44da98b954eedeac495271d0f',
            code: '0x608060405234801561001057600080fd5b50600436106101425760003560e01c80637ecebe00116100b8578063a9059cbb1161007c578063a9059cbb146106b4578063b753a98c1461071a578063bb35783b14610768578063bf353dbb146107d6578063dd62ed3e1461082e578063f2d5d56b146108a657610142565b80637ecebe00146104a15780638fcbaf0c146104f957806395d89b411461059f5780639c52a7f1146106225780639dc29fac1461066657610142565b8063313ce5671161010a578063313ce567146102f25780633644e5151461031657806340c10f191461033457806354fd4d501461038257806365fae35e1461040557806370a082311461044957610142565b806306fdde0314610147578063095ea7b3146101ca57806318160ddd1461023057806323b872dd1461024e57806330adf81f146102d4575b600080fd5b61014f6108f4565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561018f578082015181840152602081019050610174565b50505050905090810190601f1680156101bc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b610216600480360360408110156101e057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061092d565b604051808215151515815260200191505060405180910390f35b610238610a1f565b6040518082815260200191505060405180910390f35b6102ba6004803603606081101561026457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610a25565b604051808215151515815260200191505060405180910390f35b6102dc610f3a565b6040518082815260200191505060405180910390f35b6102fa610f61565b604051808260ff1660ff16815260200191505060405180910390f35b61031e610f66565b6040518082815260200191505060405180910390f35b6103806004803603604081101561034a57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610f6c565b005b61038a611128565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103ca5780820151818401526020810190506103af565b50505050905090810190601f1680156103f75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6104476004803603602081101561041b57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611161565b005b61048b6004803603602081101561045f57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061128f565b6040518082815260200191505060405180910390f35b6104e3600480360360208110156104b757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506112a7565b6040518082815260200191505060405180910390f35b61059d600480360361010081101561051057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919080359060200190929190803515159060200190929190803560ff16906020019092919080359060200190929190803590602001909291905050506112bf565b005b6105a76117fa565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156105e75780820151818401526020810190506105cc565b50505050905090810190601f1680156106145780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6106646004803603602081101561063857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611833565b005b6106b26004803603604081101561067c57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611961565b005b610700600480360360408110156106ca57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611df4565b604051808215151515815260200191505060405180910390f35b6107666004803603604081101561073057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611e09565b005b6107d46004803603606081101561077e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611e19565b005b610818600480360360208110156107ec57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611e2a565b6040518082815260200191505060405180910390f35b6108906004803603604081101561084457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611e42565b6040518082815260200191505060405180910390f35b6108f2600480360360408110156108bc57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611e67565b005b6040518060400160405280600e81526020017f44616920537461626c65636f696e00000000000000000000000000000000000081525081565b600081600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b60015481565b600081600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015610adc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f4461692f696e73756666696369656e742d62616c616e6365000000000000000081525060200191505060405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614158015610bb457507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414155b15610db25781600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015610cab576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f4461692f696e73756666696369656e742d616c6c6f77616e636500000000000081525060200191505060405180910390fd5b610d31600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205483611e77565b600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b610dfb600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205483611e77565b600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610e87600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205483611e91565b600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190509392505050565b7fea2aa0a1be11a07ed86d755c93467f4f82362b452371d1ba94d1715123511acb60001b81565b601281565b60055481565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414611020576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f6e6f742d617574686f72697a6564000000000000000000000000000081525060200191505060405180910390fd5b611069600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611e91565b600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506110b860015482611e91565b6001819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b6040518060400160405280600181526020017f310000000000000000000000000000000000000000000000000000000000000081525081565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414611215576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f6e6f742d617574686f72697a6564000000000000000000000000000081525060200191505060405180910390fd5b60016000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b60026020528060005260406000206000915090505481565b60046020528060005260406000206000915090505481565b60006005547fea2aa0a1be11a07ed86d755c93467f4f82362b452371d1ba94d1715123511acb60001b8a8a8a8a8a604051602001808781526020018673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018381526020018215151515815260200196505050505050506040516020818303038152906040528051906020012060405160200180807f190100000000000000000000000000000000000000000000000000000000000081525060020183815260200182815260200192505050604051602081830303815290604052805190602001209050600073ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff16141561148c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f4461692f696e76616c69642d616464726573732d30000000000000000000000081525060200191505060405180910390fd5b60018185858560405160008152602001604052604051808581526020018460ff1660ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa1580156114e9573d6000803e3d6000fd5b5050506020604051035173ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff1614611593576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f696e76616c69642d7065726d6974000000000000000000000000000081525060200191505060405180910390fd5b60008614806115a25750854211155b611614576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f7065726d69742d65787069726564000000000000000000000000000081525060200191505060405180910390fd5b600460008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008154809291906001019190505587146116d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260118152602001807f4461692f696e76616c69642d6e6f6e636500000000000000000000000000000081525060200191505060405180910390fd5b6000856116e4576000611706565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff5b905080600360008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508873ffffffffffffffffffffffffffffffffffffffff168a73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040518082815260200191505060405180910390a350505050505050505050565b6040518060400160405280600381526020017f444149000000000000000000000000000000000000000000000000000000000081525081565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146118e7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4461692f6e6f742d617574686f72697a6564000000000000000000000000000081525060200191505060405180910390fd5b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b80600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015611a16576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f4461692f696e73756666696369656e742d62616c616e6365000000000000000081525060200191505060405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614158015611aee57507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414155b15611cec5780600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015611be5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f4461692f696e73756666696369656e742d616c6c6f77616e636500000000000081525060200191505060405180910390fd5b611c6b600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611e77565b600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b611d35600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611e77565b600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611d8460015482611e77565b600181905550600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b6000611e01338484610a25565b905092915050565b611e14338383610a25565b505050565b611e24838383610a25565b50505050565b60006020528060005260406000206000915090505481565b6003602052816000526040600020602052806000526040600020600091509150505481565b611e72823383610a25565b505050565b6000828284039150811115611e8b57600080fd5b92915050565b6000828284019150811015611ea557600080fd5b9291505056fea265627a7a72315820c0ae2c29860c0a59d5586a579abbcddfe4bcef0524a87301425cbc58c3e94e3164736f6c634300050c0032',
            gasUsed: '0x18c4bc',
          },
          subtraces: 0,
          traceAddress: [0, 0],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'create',
        },
        {
          action: {
            from: '0xb5b06a16621616875a6c2637948bf98ea57c58fa',
            callType: 'call',
            gas: '0x4e39e1',
            input: '0x65fae35e000000000000000000000000baa65281c2fa2baacb2cb550ba051525a480d3f4',
            to: '0x6b175474e89094c44da98b954eedeac495271d0f',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            gasUsed: '0x61ff',
            output: '0x',
          },
          subtraces: 0,
          traceAddress: [0, 1],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'call',
        },
        {
          action: {
            from: '0xb5b06a16621616875a6c2637948bf98ea57c58fa',
            callType: 'call',
            gas: '0x4dd35f',
            input: '0x9c52a7f1000000000000000000000000b5b06a16621616875a6c2637948bf98ea57c58fa',
            to: '0x6b175474e89094c44da98b954eedeac495271d0f',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            gasUsed: '0x2751',
            output: '0x',
          },
          subtraces: 0,
          traceAddress: [0, 2],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'call',
        },
        {
          action: {
            from: '0xbaa65281c2fa2baacb2cb550ba051525a480d3f4',
            callType: 'call',
            gas: '0x4ef995',
            input:
              '0xac8f7a6b00000000000000000000000035d1b3f3d7966a1dfe207aa4514c12a259a0492b0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f',
            to: '0x64a84e558192dd025f3a96775fee8fb530f27177',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            gasUsed: '0xaa599',
            output: '0x0000000000000000000000009759a6ac90977b93b58547b4a71c78317f391a28',
          },
          subtraces: 1,
          traceAddress: [1],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'call',
        },
        {
          action: {
            from: '0x64a84e558192dd025f3a96775fee8fb530f27177',
            gas: '0x4d3eb6',
            init: '0x608060405234801561001057600080fd5b50604051610c91380380610c918339818101604052604081101561003357600080fd5b81019080805190602001909291908051906020019092919050505060016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550600160038190555081600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050610b648061012d6000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c8063957aa58c11610066578063957aa58c1461017e5780639c52a7f11461019c578063bf353dbb146101e0578063ef693bed14610238578063f4b9fa751461028657610093565b806336569e77146100985780633b4da69f146100e257806365fae35e146101305780636924500914610174575b600080fd5b6100a06102d0565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61012e600480360360408110156100f857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506102f6565b005b6101726004803603602081101561014657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506104f8565b005b61017c610626565b005b610186610717565b6040518082815260200191505060405180910390f35b6101de600480360360208110156101b257600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061071d565b005b610222600480360360208110156101f657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061084b565b6040518082815260200191505060405180910390f35b6102846004803603604081101561024e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610863565b005b61028e610add565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bb35783b308461034c6b033b2e3c9fd0803ce800000086610b03565b6040518463ffffffff1660e01b8152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b1580156103e857600080fd5b505af11580156103fc573d6000803e3d6000fd5b50505050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639dc29fac33836040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b1580156104a957600080fd5b505af11580156104bd573d6000803e3d6000fd5b505050505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a4505050565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146105ac576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f4461694a6f696e2f6e6f742d617574686f72697a65640000000000000000000081525060200191505060405180910390fd5b60016000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146106da576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f4461694a6f696e2f6e6f742d617574686f72697a65640000000000000000000081525060200191505060405180910390fd5b60006003819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a450565b60035481565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146107d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f4461694a6f696e2f6e6f742d617574686f72697a65640000000000000000000081525060200191505060405180910390fd5b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b60006020528060005260406000206000915090505481565b6001600354146108db576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260108152602001807f4461694a6f696e2f6e6f742d6c6976650000000000000000000000000000000081525060200191505060405180910390fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bb35783b33306109316b033b2e3c9fd0803ce800000086610b03565b6040518463ffffffff1660e01b8152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b1580156109cd57600080fd5b505af11580156109e1573d6000803e3d6000fd5b50505050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166340c10f1983836040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b158015610a8e57600080fd5b505af1158015610aa2573d6000803e3d6000fd5b505050505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a4505050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080821480610b205750828283850292508281610b1d57fe5b04145b610b2957600080fd5b9291505056fea265627a7a7231582073556d6c1e4fe23e478f0dc378056d7722545a3e43c977fa340ddc81d62345c864736f6c634300050c003200000000000000000000000035d1b3f3d7966a1dfe207aa4514c12a259a0492b0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            address: '0x9759a6ac90977b93b58547b4a71c78317f391a28',
            code: '0x608060405234801561001057600080fd5b50600436106100935760003560e01c8063957aa58c11610066578063957aa58c1461017e5780639c52a7f11461019c578063bf353dbb146101e0578063ef693bed14610238578063f4b9fa751461028657610093565b806336569e77146100985780633b4da69f146100e257806365fae35e146101305780636924500914610174575b600080fd5b6100a06102d0565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61012e600480360360408110156100f857600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506102f6565b005b6101726004803603602081101561014657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506104f8565b005b61017c610626565b005b610186610717565b6040518082815260200191505060405180910390f35b6101de600480360360208110156101b257600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061071d565b005b610222600480360360208110156101f657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061084b565b6040518082815260200191505060405180910390f35b6102846004803603604081101561024e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610863565b005b61028e610add565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bb35783b308461034c6b033b2e3c9fd0803ce800000086610b03565b6040518463ffffffff1660e01b8152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b1580156103e857600080fd5b505af11580156103fc573d6000803e3d6000fd5b50505050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639dc29fac33836040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b1580156104a957600080fd5b505af11580156104bd573d6000803e3d6000fd5b505050505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a4505050565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146105ac576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f4461694a6f696e2f6e6f742d617574686f72697a65640000000000000000000081525060200191505060405180910390fd5b60016000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146106da576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f4461694a6f696e2f6e6f742d617574686f72697a65640000000000000000000081525060200191505060405180910390fd5b60006003819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a450565b60035481565b60016000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054146107d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f4461694a6f696e2f6e6f742d617574686f72697a65640000000000000000000081525060200191505060405180910390fd5b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a45050565b60006020528060005260406000206000915090505481565b6001600354146108db576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260108152602001807f4461694a6f696e2f6e6f742d6c6976650000000000000000000000000000000081525060200191505060405180910390fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bb35783b33306109316b033b2e3c9fd0803ce800000086610b03565b6040518463ffffffff1660e01b8152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b1580156109cd57600080fd5b505af11580156109e1573d6000803e3d6000fd5b50505050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166340c10f1983836040518363ffffffff1660e01b8152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b158015610a8e57600080fd5b505af1158015610aa2573d6000803e3d6000fd5b505050505961012081016040526020815260e0602082015260e0600060408301376024356004353360003560e01c60e01b61012085a4505050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080821480610b205750828283850292508281610b1d57fe5b04145b610b2957600080fd5b9291505056fea265627a7a7231582073556d6c1e4fe23e478f0dc378056d7722545a3e43c977fa340ddc81d62345c864736f6c634300050c0032',
            gasUsed: '0xa242b',
          },
          subtraces: 0,
          traceAddress: [1, 0],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'create',
        },
        {
          action: {
            from: '0xbaa65281c2fa2baacb2cb550ba051525a480d3f4',
            callType: 'call',
            gas: '0x4429ab',
            input: '0x65fae35e0000000000000000000000009759a6ac90977b93b58547b4a71c78317f391a28',
            to: '0x6b175474e89094c44da98b954eedeac495271d0f',
            value: '0x0',
          },
          blockHash: '0xa91f7cf409a6b1b69ffc77d15c59eb8c8c442f197be9487c3d8b019448d5aa8b',
          blockNumber: 8928158,
          result: {
            gasUsed: '0x61ff',
            output: '0x',
          },
          subtraces: 0,
          traceAddress: [2],
          transactionHash: '0x495402df7d45fe36329b0bd94487f49baee62026d50f654600f6771bd2a596ab',
          transactionPosition: 25,
          type: 'call',
        },
      ] as any;

      txEvent.setFrom('0xddb108893104de4e1c6d0e47c42237db4e617acc');
      txEvent.transaction.nonce = 1229;
      txEvent.traces.push(...traces);

      const createdContracts = findCreatedContracts(txEvent);

      expect(createdContracts).toStrictEqual([
        {
          address: '0x6B175474E89094C44Da98b954EedeAC495271d0F'.toLowerCase(),
          deployer: '0xb5b06a16621616875a6c2637948bf98ea57c58fa'.toLowerCase(),
        },
        {
          address: '0x9759a6ac90977b93b58547b4a71c78317f391a28'.toLowerCase(),
          deployer: '0x64a84e558192dd025f3a96775fee8fb530f27177'.toLowerCase(),
        },
      ]);
    });
  });
});
